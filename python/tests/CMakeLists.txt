FIND_PROGRAM(NOSETESTS_EXECUTABLE nosetests REQUIRED)

SET(TEST_ENVIRONMENT "PYTHONPATH=${PYTHONPATH}")

MACRO(ADD_NOSETESTS)
    SET(TEST_NAME "${ARGV0}")
    ADD_TEST(NAME ${TEST_NAME} COMMAND ${NOSETESTS_EXECUTABLE}
        ${CMAKE_CURRENT_SOURCE_DIR}/${ARGV0})
    SET_PROPERTY(TEST ${TEST_NAME}
        APPEND PROPERTY ENVIRONMENT ${TEST_ENVIRONMENT})
ENDMACRO()

ADD_NOSETESTS("test_api.py")
ADD_NOSETESTS("test_matching.py")
